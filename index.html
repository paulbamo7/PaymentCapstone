<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Payment Complete</title>
    <style>
      body {
        font-family: 'Montserrat', sans-serif;
        text-align: center;
        padding: 48px;
      }
      .cta {
        display: inline-block;
        margin-top: 32px;
        padding: 14px 26px;
        border-radius: 24px;
        background: #2E7D32;
        color: white;
        text-decoration: none;
        font-weight: 700;
        border: none;
        cursor: pointer;
      }
    </style>
  </head>

  <body>
    <h1>GCash payment received âœ…</h1>
    <p>You can return to Coftea POS to finish the order.</p>

    <button class="cta" onclick="notifyAndReturn()">Back to Coftea POS</button>

   <button class="cta" onclick="notifyAndReturn()">Back to Coftea POS</button>

  <script>
    const params   = new URLSearchParams(window.location.search);
    const sourceId = params.get("source_id");

    async function notifyAndReturn() {
      if (sourceId) {
        try {
          await fetch("https://dozier-arthur-wistfully.ngrok-free.dev/payment-status/back-to-pos", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ sourceId, status: "paid" })
          });
      } catch (err) {
        console.warn("Bridge notify failed", err);
      }
    }
    window.location.href = "cofteapos://payment-success";
  }

  setTimeout(notifyAndReturn, 1500);
  </script>
  </body>
</html>
